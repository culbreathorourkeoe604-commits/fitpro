<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LUXIOU | PAR-Q å¥åº·æ’æŸ¥</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --primary: #00f2fe; --accent: #00ff88; --danger: #ff4757; --bg: #0b0f19; --surface: #1e293b; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; margin: 0; padding: 0; }
        
        body { background: var(--bg); color: #e2e8f0; font-family: "DIN Alternate", -apple-system, sans-serif; display: flex; flex-direction: column; height: 100svh; overflow: hidden; }
        #capture-area { background: var(--bg); display: flex; flex-direction: column; height: 100%; width: 100%; }

        .header-brand { flex: 0 0 60px; width: 100%; display: flex; align-items: center; justify-content: center; background: rgba(11, 15, 25, 0.95); z-index: 50; border-bottom: 1px solid rgba(0,242,254,0.3); }
        .brand-text { font-size: 18px; font-weight: 900; color: #fff; letter-spacing: 2px; text-shadow: 0 0 10px rgba(0,242,254,0.8); }
        .step-badge { position: absolute; right: 15px; background: rgba(255,71,87,0.1); border: 1px solid var(--danger); color: var(--danger); font-size: 10px; padding: 4px 8px; border-radius: 12px; font-weight: bold; }

        .warning-banner { background: rgba(255,71,87,0.1); padding: 15px 20px; border-bottom: 1px solid rgba(255,71,87,0.3); color: #fff; font-size: 13px; line-height: 1.5; }
        .warning-banner span { color: var(--danger); font-weight: bold; }

        .q-list { flex: 1; overflow-y: auto; padding: 20px 15px 110px 15px; scrollbar-width: none; }
        .q-list::-webkit-scrollbar { display: none; }
        
        .q-item { background: var(--surface); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; margin-bottom: 15px; }
        .q-text { font-size: 14px; color: #e2e8f0; line-height: 1.5; font-weight: bold; margin-bottom: 12px; }
        
        .ans-group { display: flex; gap: 10px; }
        .ans-btn { flex: 1; padding: 10px; text-align: center; border-radius: 8px; font-size: 14px; font-weight: bold; color: #94a3b8; background: rgba(11, 15, 25, 0.6); border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .ans-btn.no.active { background: rgba(0,255,136,0.15); border-color: var(--accent); color: var(--accent); }
        .ans-btn.yes.active { background: rgba(255,71,87,0.15); border-color: var(--danger); color: var(--danger); }

        .bottom-action { position: fixed; bottom: 0; left: 0; width: 100%; padding: 15px 20px 25px 20px; background: linear-gradient(to top, rgba(11,15,25,1) 50%, rgba(11,15,25,0)); z-index: 10; }
        .btn-generate { width: 100%; background: var(--primary); color: #000; border: none; padding: 16px; border-radius: 16px; font-size: 16px; font-weight: 900; box-shadow: 0 8px 25px rgba(0,242,254,0.4); display: flex; justify-content: center; align-items: center; gap: 8px; }

        .poster-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; padding: 20px; opacity: 0; transition: opacity 0.3s; }
        .poster-overlay.active { display: flex; opacity: 1; }
        .poster-scroll-area { max-height: 70vh; width: 100%; overflow-y: auto; border-radius: 12px; border: 2px solid var(--danger); box-shadow: 0 10px 40px rgba(255,71,87,0.3); }
        .poster-scroll-area::-webkit-scrollbar { display: none; }
        .poster-img { width: 100%; display: block; }
        
        .poster-tip { color: #fff; font-size: 15px; margin: 20px 0 15px 0; font-weight: bold; letter-spacing: 1px; display: flex; align-items: center; gap: 8px; }
        .btn-next { background: #fff; color: #000; border: none; padding: 14px 35px; border-radius: 30px; font-weight: 900; font-size: 15px; box-shadow: 0 5px 20px rgba(255,255,255,0.3); }
        
        @keyframes pulseTip { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .pulse-text { animation: pulseTip 1.5s infinite; color: var(--primary); }
    </style>
</head>
<body>

    <div id="capture-area">
        <div class="header-brand">
            <div class="brand-text">PAR-Q åŒ»ç–—çº§å¥åº·æ’æŸ¥</div>
            <div class="step-badge">æ ¸å¿ƒå‡†å…¥æ’æŸ¥</div>
        </div>
        
        <div class="warning-banner">
            <span>âš ï¸ æç¤ºï¼š</span>ä¸ºäº†æ‚¨çš„è®­ç»ƒå®‰å…¨ï¼Œè¯·å¦‚å®è¯„ä¼°ä»¥ä¸‹ 7 é¡¹å›½é™…æ ‡å‡†åŒ»å­¦æ’æŸ¥æŒ‡æ ‡ã€‚æœ¬é¡µé¢å°†ç”Ÿæˆæ¡£æ¡ˆç”¨äºå¥åº·å¤‡ä¹¦ã€‚
        </div>

        <div class="q-list" id="scrollArea">
            </div>
    </div> 

    <div class="bottom-action" id="actionBtnGroup">
        <button class="btn-generate" onclick="generatePoster()">
            <span style="font-size: 20px;">ğŸ›¡ï¸</span> ç¡®è®¤æ— è¯¯ï¼Œç”Ÿæˆå…è´£æ¡£æ¡ˆ
        </button>
    </div>

    <div class="poster-overlay" id="posterOverlay">
        <div class="poster-scroll-area">
            <img id="posterImg" class="poster-img" src="" alt="PAR-Q æµ·æŠ¥">
        </div>
        <div class="poster-tip"><span class="pulse-text">ğŸ‘‡ é•¿æŒ‰ä¸Šæ–¹å›¾ç‰‡ï¼Œä½œä¸ºå®‰å…¨å¥åº·æ‰¿è¯ºå­˜æ¡£</span></div>
        <button class="btn-next" onclick="goToNextStep()">è¿›å…¥ LUXIOU å…¨æ¯èˆ±æ‰«æ â”</button>
    </div>

    <script>
        const questions = [
            "1. åŒ»ç”Ÿæ˜¯å¦æ›¾å‘Šè¯‰è¿‡æ‚¨ï¼Œæ‚¨çš„å¿ƒè„æœ‰é—®é¢˜ï¼Œå¹¶å»ºè®®æ‚¨åªèƒ½è¿›è¡ŒåŒ»ç”Ÿæ¨èçš„ä½“è‚²æ´»åŠ¨ï¼Ÿ",
            "2. å½“æ‚¨è¿›è¡Œä½“è‚²æ´»åŠ¨æ—¶ï¼Œæ‚¨æ˜¯å¦æ„Ÿåˆ°èƒ¸ç—›ï¼Ÿ",
            "3. è¿‡å»å‡ ä¸ªæœˆä¸­ï¼Œæ‚¨åœ¨æœªè¿›è¡Œä½“è‚²æ´»åŠ¨æ—¶æ˜¯å¦æ›¾æ„Ÿåˆ°èƒ¸ç—›ï¼Ÿ",
            "4. æ‚¨æ˜¯å¦æ›¾å› å¤´æ™•è€Œå¤±å»å¹³è¡¡ï¼Œæˆ–æ›¾å¤±å»æ„è¯†ï¼Ÿ",
            "5. æ‚¨æ˜¯å¦æœ‰éª¨éª¼æˆ–å…³èŠ‚é—®é¢˜ï¼ˆå¦‚èƒŒéƒ¨ã€è†ç›–æˆ–è‡€éƒ¨ï¼‰ï¼Œå¯èƒ½ä¼šå› æ”¹å˜ä½“è‚²æ´»åŠ¨è€ŒåŠ é‡ï¼Ÿ",
            "6. åŒ»ç”Ÿç›®å‰æ˜¯å¦ä¸ºæ‚¨å¼€å…·äº†æ²»ç–—è¡€å‹æˆ–å¿ƒè„é—®é¢˜çš„å¤„æ–¹è¯ç‰©ï¼Ÿ",
            "7. æ‚¨æ˜¯å¦çŸ¥é“æœ‰ä»»ä½•å…¶ä»–åŸå› å¯¼è‡´æ‚¨ä¸åº”è¿›è¡Œä½“è‚²æ´»åŠ¨ï¼Ÿ"
        ];

        // æ¸²æŸ“é—®å·
        const listDiv = document.getElementById('scrollArea');
        questions.forEach((q, idx) => {
            listDiv.innerHTML += `
                <div class="q-item">
                    <div class="q-text">${q}</div>
                    <div class="ans-group">
                        <div class="ans-btn yes" onclick="selectAns(this)">æ˜¯çš„ (YES)</div>
                        <div class="ans-btn no active" onclick="selectAns(this)">æ²¡æœ‰ (NO)</div>
                    </div>
                </div>
            `;
        });

        // å•é€‰é€»è¾‘
        function selectAns(btn) {
            let siblings = btn.parentElement.children;
            for(let i=0; i<siblings.length; i++) siblings[i].classList.remove('active');
            btn.classList.add('active');
        }

        // ğŸš€ ç”Ÿæˆæµ·æŠ¥ï¼ˆåŒæ¬¾æˆªé•¿å›¾æŠ€æœ¯ï¼‰
        function generatePoster() {
            if (navigator.vibrate) navigator.vibrate(50);
            let btn = document.querySelector('.btn-generate');
            btn.innerHTML = "â³ æ­£åœ¨ç”ŸæˆåŒ»ç–—çº§å®‰å…¨åº•æ¡£...";
            btn.style.opacity = "0.7";
            
            document.getElementById('actionBtnGroup').style.display = 'none';
            let captureArea = document.getElementById('capture-area');
            let scrollArea = document.getElementById('scrollArea');
            
            let origHeight = captureArea.style.height;
            let origOverflow = scrollArea.style.overflowY;
            let origFlex = scrollArea.style.flex;
            
            scrollArea.style.overflowY = 'visible';
            scrollArea.style.flex = 'none';
            captureArea.style.height = captureArea.scrollHeight + 'px';

            html2canvas(captureArea, {
                backgroundColor: "#0b0f19",
                scale: 2, 
                windowHeight: captureArea.scrollHeight
            }).then(canvas => {
                captureArea.style.height = origHeight;
                scrollArea.style.overflowY = origOverflow;
                scrollArea.style.flex = origFlex;
                
                document.getElementById('actionBtnGroup').style.display = 'block';
                btn.innerHTML = "<span style='font-size: 20px;'>ğŸ›¡ï¸</span> ç¡®è®¤æ— è¯¯ï¼Œç”Ÿæˆå…è´£æ¡£æ¡ˆ";
                btn.style.opacity = "1";

                let imgData = canvas.toDataURL("image/jpeg", 0.9);
                document.getElementById('posterImg').src = imgData;
                document.getElementById('posterOverlay').classList.add('active');
                
            }).catch(err => {
                alert("ç”Ÿæˆæ¡£æ¡ˆå¤±è´¥ï¼Œè¯·é‡è¯•ï¼");
                document.getElementById('actionBtnGroup').style.display = 'block';
                captureArea.style.height = origHeight; scrollArea.style.overflowY = origOverflow; scrollArea.style.flex = origFlex;
            });
        }

        function goToNextStep() {
            window.location.href = 'case_detail.html'; // ç­”å®Œé¢˜è¿›å…¥æœ€åçš„é«˜æ½®ï¼šå…¨æ¯èˆ±æ‰«æ
        }
    </script>
</body>
</html>
